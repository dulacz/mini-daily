{% extends 'base.html' %}
{% block content %}
<h2>历史 (最近 {{ days }} 天)</h2>
<table class="history">
    <thead>
        <tr>
            <th>日期</th>
            {% for t in tasks %}<th>{{ t }}</th>{% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for d in dates %}
        <tr>
            <td>{{ d }}</td>
            {% for t in tasks %}
            {% set v = hist[d].get(t, 0) %}
            <td class="{{ 'cell-done' if v else 'cell-not' }}">{{ '✅' if v else '—' }}</td>
            {% endfor %}
        </tr>
        {% endfor %}
    </tbody>
</table>
<form method="get" action="/history" class="days-form">
    <label>显示天数: <input type="number" name="days" value="{{ days }}" min="1" max="365" /></label>
    <button type="submit">刷新</button>
</form>
{% endblock %}